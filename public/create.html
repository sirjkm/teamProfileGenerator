<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"/>
    <title>Profile Page</title>
</head>

<body>
    <div class="container">
        <div class="jumbotron">
            <h1 class="text-center"><span class="fa fa-user-plus"></span> Create Your Team Profile</h1>
            <hr/>
            <h2 class="text-center">Make your reservation</h2>
            <br/>
            <div class="text-center">
                <a href="./team.html"><button class="btn btn-lg btn-primary"><span class="fa fa-list-alt"></span> View Teams</button></a>
                <a href="./index.html"><button class="btn btn-lg btn-default"><span class="fa fa-home"></span></button></a>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12">
                <div class="card">
                    <div class="card-header">My Team</div>
                    <div class="card-body">
                        <form role="form">
                            <div class="form-group">
                                <label for="reserve-name">Role</label>
                                <input type="text" class="form-control" id="team-role" />
                            </div>
                            <div class="form-group">
                                <label for="reserve-phone">Name</label>
                                <input type="text" class="form-control" id="team-name" />
                            </div>
                            <div class="form-group">
                                <label for="reserve-email">Email</label>
                                <input type="text" class="form-control" id="team-email" />
                            </div>
                            <div class="form-group">
                                <label for="reserve-unique-id">GitHub</label>
                                <input type="text" class="form-control" id="team-github"/>
                            </div>
                            <div class="form-group">
                                <label for="reserve-unique-id">School</label>
                                <input type="text" class="form-control" id="team-school"/>
                            </div>
                            <button type="submit" class="btn btn-primary submit">Submit</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>

<script type="text/javascript">
const submitBtn = document.querySelector('.submit');
submitBtn.addEventListener('click', (e) => {
  e.preventDefault();

  let newReservation = {
    customerName: document.getElementById('reserve-name').value.trim(),
    phoneNumber: document.getElementById('reserve-phone').value.trim(),
    customerEmail: document.getElementById('reserve-email').value.trim(),
    customerID: document.getElementById('reserve-unique-id').value.trim(),
  };
  console.log('submitBtn.onclick -> newReservation', newReservation);

  fetch('/api/tables', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(newReservation),
  })
    .then((response) => response.json())
    .then((data) => {
      if (data) {
        alert('Yay! You are officially booked!');
      } else {
        alert('Sorry you are on the wait list');

        document.getElementById('reserve-name').value = '';
        document.getElementById('reserve-phone').value = '';
        document.getElementById('reserve-email').value = '';
        document.getElementById('reserve-unique-id').value = '';
      }
    })
      .catch((error) => {
        console.error('Error:', error);
      });
});
</script>
